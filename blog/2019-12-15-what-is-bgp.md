---
id: bgp
author: آرش حاتمی
author_title: DevOps - Network Eng
author_url: https://github.com/hatamiarash7
author_image_url: https://avatars1.githubusercontent.com/u/16325641?v=4
title: "پروتکل BGP چیست؟"
tags: [شبکه, مسیریابی, روتر, bgp, bgp چیست, پروتکل bgp, همسایگی در شبکه]
---

![tooltip](/img/blog/60.webp)

BGP، پروتکل مسیریابی در اینترنت است که شیوه‌ی برقراری ارتباط بین روترها را تعیین می‌کند. روترها برای برقراری ارتباطات ، همسایگی ایجاد می‌کنند. تعداد این همسایگی‌ها ، بهترین عامل سنجش اعتبار و قوت BGP است.

<!--truncate-->

زمانی که یک نامه در صندوق پست انداخته می‌شود، اداره‌ی پست موظف است آن نامه را پردازش کرده و مسیری سریع و آسان برای تحویل آن به گیرنده انتخاب کند. در اینترنت هم همین‌طور است، وقتی کسی داده‌ها را از طریق اینترنت ارسال می‌کند، BGP مسئول بررسی تمام‌مسیرهای موجود و انتخاب بهترین مسیر است.

BGP مخفف Border Gateway Protocol بوده و یکی از پروتکل‌های مسیریابی در سراسر اینترنت است. پروتکل‌های مسیریابی مانند BGP همچون نقشه‌ای عمل می‌کند که بهترین مسیر را از مبدأ تا مقصد نشان داده و چگونگی برقراری ارتباط بین روترها برای انتشار انتقال اطلاعات را مشخص می‌کند. روتر BGP اطلاعات قابل‌دسترسی را با استفاده از یک پروتکل حمل‌ونقل به نام TCP تبادل کرده و پس از تشکیل یک اتصال TCP، روتر پیام اولیه را برای مذاکره و تأیید پارامترهای اتصال ارسال می‌کند.

## چرا به پروتکل BGP نیاز داریم؟

اینترنت ابتدا تنها از یک ابر کوچک تشکیل‌شده بود و فقط چند شبکه‌ به هم متصل در آن وجود داشت. در آن زمان، تمام آنچه برای مسیریابی انجام می‌شد تعریف گره‌های این شبکه‌های محدود و ایجاد ارتباط بین آن‌ها بود. اما اینترنت کوچک باقی نماند و ترکیب بیشتری از شبکه‌ها در اینترنت به وجود آمده است که برای برقراری ارتباط وجود یک سیستم مسیریابی پویا الزامی است. درنتیجه، که یک پروتکل مسیریابی خارجی جدید تعریف شد که قابلیت‌های مقیاس‌پذیری را فراهم آورد. ویژگی مقیاس‌پذیری پروتکل BGP سبب شد این‌گونه مسیریابی‌ها را به‌خوبی انجام دهد.

## پروتکلBGP چگونه کار می‌کند؟

وقتی دو Autonomous System ) AS، سیستم خودمختار، گروهی از دستگاه‌ها که توسط یک سازمان مستقل مدیریت می‌شوند ) اقدام به برقراری ارتباط و تبادل اطلاعات با یکدیگر می‌کنند معمولاً از BGP برای مسیریابی استفاده می‌کنند. از دیدگاه مسیریابی ، محیط اینترنت از تعداد زیادی AS تشکیل ‌شده که با راه‌های ارتباطی اصلی به هم متصل شده‌اند. هر AS دارای یک شماره‌ی مستقل است که به آن ( Autonomous System Number ) ASN می‌گویند. ASNها برای استفاده در مسیریابی بیرونی اختصاص داده‌شده‌اند. BGP می‌تواند تمام ASهای مختلف را ببیند ، هر ASN را شناسایی و بهترین مسیر ( طبق سیاست‌ سیستم ) را انتخاب کند.

به‌ صورت خلاصه می‌توان گفت : روترها برای ارتباط با یکدیگر ایجاد همسایگی می‌کنند به این همسایگی peer می‌گویند. پس ‌از آن هر روتر اطلاعات کامل مسیر تا یک مقصد خارج را به روترهای همسایه‌ی خود ارسال می‌کنند. هر peer تمام‌ مسیرهایی که برای هر شبکه می‌شناسد ، مدیریت می‌کند و انتشار آن اطلاعات را به AS مجاور خود گسترش می‌دهد. مکانیسم تصمیم‌گیری BGP به این صورت است که همه‌ی داده‌های به‌ دست ‌آمده را تجزیه‌ و تحلیل می‌کند و یکی از همسایه‌های خود را برای ارسال بسته‌ها برای یک مقصد خاص تعیین می‌نماید.

![tooltip](/img/blog/59.webp)

پس وقتی حجم مسیرها و مسیریابی بسیار زیاد است برای مسیریابی در بین مراکز ، از پروتکل BGP استفاده می‌شود. BGP به‌ طور خاص برای تبادل اطلاعات مسیریابی بین تمام ارائه‌ دهندگان خدمات اینترنتی مورداستفاده قرار می‌گیرد. به این صورت که اگر شرکتی از بیش یک شرکت ارائه‌ دهنده‌ی خدمات اینترنتی پهنای باند دریافت کند ، در صورت down شدن یکی از سرویس‌ها BGP به‌طور خودکار ، ترافیک موردنیاز را از بستر provider پشتیبان عبور می‌دهد.
